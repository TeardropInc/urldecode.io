// Generated by CoffeeScript 1.6.3
(function() {
  $(function() {
    var ButtonView, MainView, app_router, button_view, main_view;
    window.App = {};
    Backbone.history.start();
    App.currentHash = window.location.hash === "" ? "decode" : window.location.hash.substr(1);
    window.location.hash = App.currentHash;
    $("[role=toggle-" + App.currentHash + "]").addClass("active");
    MainView = Backbone.View.extend({
      inputField: null,
      outputField: null,
      method: null,
      events: {
        "input [role=input]": "renderOutput",
        "methodChange": "onMethodChange"
      },
      initialize: function() {
        this.method = App.currentHash;
        this.input = $("[role=input]");
        return this.output = $("[role=output]");
      },
      renderOutput: function() {
        var parsedValue;
        parsedValue = this.method === "decode" ? Url.decode(this.input.val()) : Url.encode(this.input.val());
        return this.output.val(parsedValue);
      },
      onMethodChange: function(event, data) {
        this.method = data;
        return this.input.trigger("input");
      }
    });
    main_view = new MainView({
      el: $("[role=io-view]")
    });
    ButtonView = Backbone.View.extend({
      elements: null,
      events: {
        "click .button": "onClick"
      },
      initialize: function() {
        return this.elements = this.$(".button");
      },
      onClick: function(event) {
        this.elements.removeClass("active");
        return $(event.target).addClass("active");
      }
    });
    button_view = new ButtonView({
      el: $(".method-select")
    });
    App.Router = Backbone.Router.extend({
      routes: {
        "*method": "methodChange"
      }
    });
    app_router = new App.Router;
    app_router.on('route:methodChange', function(method) {
      return $("[role=input]").trigger("methodChange", [method]);
    });
    $("[role=output]").click(function(event) {
      return $(event.target).select();
    });
    return $('[role=copy-to-clipboard]').zclip({
      path: '/swfs/zero-clipboard.swf',
      copy: function() {
        return $("[role=output]").val();
      }
    });
  });

}).call(this);
